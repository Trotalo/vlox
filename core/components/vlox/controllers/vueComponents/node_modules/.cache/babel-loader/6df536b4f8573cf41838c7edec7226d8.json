{"remainingRequest":"/home/camicase82/development/krakenBlocks/www/html/vlox/core/components/vlox/controllers/vueComponents/node_modules/babel-loader/lib/index.js!/home/camicase82/development/krakenBlocks/www/html/vlox/core/components/vlox/controllers/vueComponents/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/camicase82/development/krakenBlocks/www/html/vlox/core/components/vlox/controllers/vueComponents/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/camicase82/development/krakenBlocks/www/html/vlox/core/components/vlox/controllers/vueComponents/vloxEditor/src/components/viewBlocksList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/camicase82/development/krakenBlocks/www/html/vlox/core/components/vlox/controllers/vueComponents/vloxEditor/src/components/viewBlocksList.vue","mtime":1647303562927},{"path":"/home/camicase82/development/krakenBlocks/www/html/vlox/core/components/vlox/controllers/vueComponents/babel.config.js","mtime":1646933186444},{"path":"/home/camicase82/development/krakenBlocks/www/html/vlox/core/components/vlox/controllers/vueComponents/node_modules/cache-loader/dist/cjs.js","mtime":1647300049477},{"path":"/home/camicase82/development/krakenBlocks/www/html/vlox/core/components/vlox/controllers/vueComponents/node_modules/babel-loader/lib/index.js","mtime":1647300050347},{"path":"/home/camicase82/development/krakenBlocks/www/html/vlox/core/components/vlox/controllers/vueComponents/node_modules/cache-loader/dist/cjs.js","mtime":1647300049477},{"path":"/home/camicase82/development/krakenBlocks/www/html/vlox/core/components/vlox/controllers/vueComponents/node_modules/vue-loader/lib/index.js","mtime":1647300050627}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuanNvbi5zdHJpbmdpZnkuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwp2YXIgYXhpb3NDb25maWcgPSB7CiAgaGVhZGVyczogewogICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJywKICAgICdBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW4nOiAiKiIKICB9Cn07CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAidmlldy1ibG9jay1saXN0IiwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc2hvd0Jsb2Nrc0xpc3Q6IGZhbHNlLAogICAgICBibG9ja0xpc3Q6IFtdLAogICAgICByZXNvdXJjZUlkOiAxLAogICAgICBibG9ja09iamVjdDogW10KICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBzZWxlY3RCbG9jazogZnVuY3Rpb24gc2VsZWN0QmxvY2soYmxvY2tEYXRhKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgbW9kYWxSZWYgPSB0aGlzLiRidk1vZGFsOwogICAgICB0aGlzLiRheGlvcy5nZXQod2luZG93LmxvY2F0aW9uLnByb3RvY29sICsgIi8vIiArIHdpbmRvdy5sb2NhdGlvbi5ob3N0ICsgdGhpcy4kcmVzdFJvdXRlICsgJy9yZXN0L2luZGV4LnBocD9fcmVzdD1ibG9ja3MvJyArIGJsb2NrRGF0YS5pZCwgYXhpb3NDb25maWcpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgX3RoaXMuYmxvY2tPYmplY3QgPSByZXNwb25zZS5kYXRhLm9iamVjdDsKCiAgICAgICAgX3RoaXMuJGVtaXQoJ2Jsb2NrLXNlbGVjdGVkJywgX3RoaXMuYmxvY2tPYmplY3QpOwoKICAgICAgICBtb2RhbFJlZi5oaWRlKCdzZWxlY3QtYmxvY2snKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgYWxlcnQoJ1RoZSBhamF4IHBldGl0aW9uIGhhcyBwcm9ibGVtIGRvaW5nIGEgR0VUIHJlcXVlc3QsIHBsZWFzZSB2ZXJpZnkgdGhlIGJsb2NrcyBDb250cm9sbGVyLicgKyBKU09OLnN0cmluZ2lmeShlcnJvcikpOwogICAgICB9KTsKICAgIH0sCiAgICBsb2FkQkxvY2tMaXN0OiBmdW5jdGlvbiBsb2FkQkxvY2tMaXN0KCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHRoaXMuJGF4aW9zLmdldCh3aW5kb3cubG9jYXRpb24ucHJvdG9jb2wgKyAiLy8iICsgd2luZG93LmxvY2F0aW9uLmhvc3QgKyB0aGlzLiRyZXN0Um91dGUgKyAnL3Jlc3QvYmxvY2tzP2xpbWl0PTEwMCcpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgX3RoaXMyLmJsb2NrTGlzdCA9IHJlc3BvbnNlLmRhdGE7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpOwoKICAgICAgICBfdGhpczIuJGRpYWxvZy5hbGVydCgnRXJyb3IgY29udGFjdGluZyB3ZWJzZXJ2aWNlLCBjaGVjayBzZXJ2ZXIgbG9ncyEnKTsKICAgICAgfSk7CiAgICB9LAogICAgZGVsZXRlQmxvY2s6IGZ1bmN0aW9uIGRlbGV0ZUJsb2NrKGJsb2NrKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgdGhpcy4kZGlhbG9nLmNvbmZpcm0oJ0FyZSB5b3VyIHN1cmUgeW91IHdhbnQgdG8gZGVsZXRlICcgKyBibG9jay5jaHVua05hbWUpLnRoZW4oZnVuY3Rpb24gKGRpYWxvZykgewogICAgICAgIGNvbnNvbGUubG9nKGRpYWxvZyk7CgogICAgICAgIF90aGlzMy4kYXhpb3MuZGVsZXRlKHdpbmRvdy5sb2NhdGlvbi5wcm90b2NvbCArICIvLyIgKyB3aW5kb3cubG9jYXRpb24uaG9zdCArIF90aGlzMy4kcmVzdFJvdXRlICsgJy9yZXN0L2Jsb2Nrcy8nICsgYmxvY2suaWQpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5zdWNjZXNzKSB7CiAgICAgICAgICAgIF90aGlzMy4kZGlhbG9nLmFsZXJ0KCdCbG9jayBkZWxldGVkIHN1Y2Nlc3NmdWxseScpOwoKICAgICAgICAgICAgX3RoaXMzLmxvYWRCTG9ja0xpc3QoKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIF90aGlzMy4kZGlhbG9nLmFsZXJ0KHJlc3BvbnNlLmRhdGEubWVzc2FnZSk7CiAgICAgICAgICB9CiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICBfdGhpczMuJGRpYWxvZy5hbGVydCgnUHJvYmxlbXMgc2VuZGluZyB0aGUgcGV0aXRpb246ICcgKyBlcnJvcik7CiAgICAgICAgfSk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uICgpIHsKICAgICAgICBjb25zb2xlLmxvZygnQ2xpY2tlZCBvbiBjYW5jZWwnKTsKICAgICAgfSk7CiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdGhpcy5sb2FkQkxvY2tMaXN0KCk7CiAgfSwKICBiZWZvcmVVcGRhdGU6IGZ1bmN0aW9uIGJlZm9yZVVwZGF0ZSgpIHsKICAgIGlmICh0aGlzLiRzdG9yZS5nZXR0ZXJzLnJlZnJlc2hMaXN0KSB7CiAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnY2hhbmdlJywgZmFsc2UpOwogICAgICB0aGlzLmxvYWRCTG9ja0xpc3QoKTsKICAgIH0KICB9Cn07"},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0CA;AACAA;AACA,sCADA;AAEA;AAFA;AADA;AAMA;AACAC,yBADA;AAEAC,MAFA,kBAEA;AACA;AACAC,2BADA;AAEAC,mBAFA;AAGAC,mBAHA;AAIAC;AAJA;AAMA,GATA;AAUAC;AACAC,eADA,uBACAC,SADA,EACA;AAAA;;AACA;AACA,iGACA,+BADA,GACAA,YADA,EACAC,WADA,EAEAC,IAFA,CAEA;AACA;;AACA;;AACAC;AACA,OANA,EAOAC,KAPA,CAOA;AACAC,0GACAC,qBADA;AAEA,OAVA;AAWA,KAdA;AAeAC,iBAfA,2BAeA;AAAA;;AACA,+EACA,eADA,GACA,wBADA,EAEAL,IAFA,CAEA;AACA;AACA,OAJA,EAKAE,KALA,CAKA;AACAI;;AACA;AACA,OARA;AASA,KAzBA;AA0BAC,eA1BA,uBA0BAC,KA1BA,EA0BA;AAAA;;AACA,mBACAC,OADA,CACA,qDADA,EAEAT,IAFA,CAEA;AACAM;;AACA,sFACA,iBADA,GACA,eADA,GACAE,QADA,EAEAR,IAFA,CAEA;AACA;AACA;;AACA;AACA,WAHA,MAGA;AACA;AACA;AACA,SATA,EAUAE,KAVA,CAUA;AACA;AACA,SAZA;AAaA,OAjBA,EAkBAA,KAlBA,CAkBA;AACAI;AACA,OApBA;AAsBA;AAjDA,GAVA;AA6DAI,SA7DA,qBA6DA;AACA;AACA,GA/DA;AAgEAC,cAhEA,0BAgEA;AACA;AACA;AACA;AACA;AACA;AArEA","names":["headers","name","data","showBlocksList","blockList","resourceId","blockObject","methods","selectBlock","blockData","axiosConfig","then","modalRef","catch","alert","JSON","loadBLockList","console","deleteBlock","block","confirm","mounted","beforeUpdate"],"sourceRoot":"vloxEditor/src/components","sources":["viewBlocksList.vue"],"sourcesContent":["<!--\n  - This file is part of VloX.\n  -\n  - Copyright (c) TROTALO, SAS. All Rights Reserved.\n  -\n  - For complete copyright and license information, see the COPYRIGHT and LICENSE\n  - files found in the top-level directory of this distribution.\n  -->\n\n<template>\n  <b-modal\n      v-model=\"showBlocksList\"\n      id=\"select-block\" title=\"VloX List\" size=\"xl\" scrollable>\n    <b-container fluid>\n      <b-row v-if=\"blockList.results\">\n        <b-col cols=\"12\" lg=\"6\" xl=\"4\" v-for=\"block in blockList.results\" :key=\"block.id\">\n          <div class=\"vloxBlock my-2\">\n            <button class=\"vloxBlockWSelect\"\n                    v-on:click=\"selectBlock(block)\">\n              <h5>{{ block.title }}</h5>\n              <p>{{ block.description }}</p>\n            </button>\n            <button v-on:click=\"deleteBlock(block)\" class=\"vloxBlockDelete btn btn-outline-danger\"><i class=\"fas fa-trash-alt\"></i></button>\n          </div>\n        </b-col>\n      </b-row>\n    </b-container>\n    <template #modal-footer>\n      <div class=\"addButton w-100\">\n          <b-button\n              variant=\"outline-primary\"\n              v-b-modal.new-block\n              class=\"addvloxBlock\"\n              @click=\"showBlocksList=false\"\n              type=\"button\">Create a New Block\n          </b-button>\n      </div>\n    </template>\n  </b-modal>\n</template>\n<script>\n\nconst axiosConfig = {\n  headers: {\n    'Content-Type': 'application/json',\n    'Access-Control-Allow-Origin': \"*\",\n  }\n};\nexport default {\n  name: \"view-block-list\",\n  data() {\n    return {\n      showBlocksList: false,\n      blockList : [],\n      resourceId: 1,\n      blockObject: []\n    }\n  },\n  methods: {\n    selectBlock(blockData) {\n      const modalRef = this.$bvModal;\n      this.$axios.get(window.location.protocol + \"//\" + window.location.host + this.$restRoute +\n          '/rest/index.php?_rest=blocks/' + blockData.id, axiosConfig)\n          .then(response => {\n            this.blockObject = response.data.object;\n            this.$emit('block-selected', this.blockObject);\n            modalRef.hide('select-block');\n          })\n          .catch(error => {\n            alert('The ajax petition has problem doing a GET request, please verify the blocks Controller.' +\n                  JSON.stringify(error) );\n          });\n    },\n    loadBLockList() {\n      this.$axios.get(window.location.protocol + \"//\" + window.location.host +\n          this.$restRoute + '/rest/blocks?limit=100')\n          .then(response => {\n            this.blockList = response.data;\n          })\n          .catch(error => {\n            console.error(error);\n            this.$dialog.alert('Error contacting webservice, check server logs!');\n          });\n    },\n    deleteBlock(block) {\n      this.$dialog\n          .confirm('Are your sure you want to delete ' + block.chunkName)\n          .then(dialog => {\n            console.log(dialog);\n            this.$axios.delete(window.location.protocol + \"//\" + window.location.host +\n                          this.$restRoute + '/rest/blocks/' + block.id)\n                .then(response => {\n                  if (response.data.success) {\n                    this.$dialog.alert('Block deleted successfully');\n                    this.loadBLockList();\n                  } else {\n                    this.$dialog.alert(response.data.message);\n                  }\n                })\n                .catch(error => {\n                  this.$dialog.alert('Problems sending the petition: ' + error);\n                });\n          })\n          .catch(function() {\n            console.log('Clicked on cancel');\n          });\n\n    }\n  },\n  mounted() {\n    this.loadBLockList();\n  },\n  beforeUpdate() {\n    if (this.$store.getters.refreshList) {\n      this.$store.commit('change', false);\n      this.loadBLockList();\n    }\n  }\n};\n</script>\n<style>\n  #vloxAddBlockModal .modal-body button {\n    background: #EEEEEE;\n  }\n  .vloxBlock {\n    position: relative;\n    height: 160px;\n  }\n  .vloxBlock .vloxBlockWSelect {\n    width: 100%;\n    height: 100%;\n    padding: 2rem 0;\n    background: no-repeat;\n    border: 1px solid #b6b6b6;\n    background-color: white;\n  }\n  .vloxBlock .vloxBlockWSelect:hover {\n    background-color: #ebebeb;\n  }\n  .vloxBlock .vloxBlockDelete {\n    position: absolute;\n    right: 10px;\n    top: 100%;\n    transform: translateY(-121%);\n  }\n  .modal-body {\n    background: #f8f8f8;\n  }\n  .addButton {\n    text-align: center;\n  }\n  .close {\n    font-size: 1.5rem;\n    padding: 5px 5px 10px;\n    margin: 0;\n    line-height: 13px;\n    font-weight: bold;\n    background: transparent;\n    border-radius: 6px;\n    border: 1px solid #afafaf;\n  }\n  .btn-outline-danger, .btn-outline-success {\n    color: #898989;\n    border-color: #d8d8d8;\n  }\n  button {\n    transition: 0.3s;\n  }\n</style>"]}]}