{"remainingRequest":"/home/camicase82/development/krakenBlocks/www/html/vlox/core/components/vlox/controllers/vueComponents/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/camicase82/development/krakenBlocks/www/html/vlox/core/components/vlox/controllers/vueComponents/vloxEditor/src/components/newBlockComponent.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/camicase82/development/krakenBlocks/www/html/vlox/core/components/vlox/controllers/vueComponents/vloxEditor/src/components/newBlockComponent.vue","mtime":1647302511087},{"path":"/home/camicase82/development/krakenBlocks/www/html/vlox/core/components/vlox/controllers/vueComponents/node_modules/cache-loader/dist/cjs.js","mtime":1647300049477},{"path":"/home/camicase82/development/krakenBlocks/www/html/vlox/core/components/vlox/controllers/vueComponents/node_modules/babel-loader/lib/index.js","mtime":1647300050347},{"path":"/home/camicase82/development/krakenBlocks/www/html/vlox/core/components/vlox/controllers/vueComponents/node_modules/cache-loader/dist/cjs.js","mtime":1647300049477},{"path":"/home/camicase82/development/krakenBlocks/www/html/vlox/core/components/vlox/controllers/vueComponents/node_modules/vue-loader/lib/index.js","mtime":1647300050627}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmxldCBibG9ja0xpc3QgPSBbXTsKLyoKYXhpb3MuZ2V0KHdpbmRvdy5sb2NhdGlvbi5wcm90b2NvbCArICIvLyIgKyB3aW5kb3cubG9jYXRpb24uaG9zdCArIFZ1ZS5wcm90b3R5cGUuJHJlc3RSb3V0ZSArICcvcmVzdC9ibG9ja3MnKQogICAgLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICBibG9ja0xpc3QgPSByZXNwb25zZS5kYXRhOwogICAgfSkKICAgIC5jYXRjaChlcnJvciA9PiB7CiAgICAgIGFsZXJ0KCdUaGUgYWpheCBwZXRpdGlvbiBoYXMgcHJvYmxlbSBkb2luZyBhIEdFVCByZXF1ZXN0LCBwbGVhc2UgdmVyaWZ5IHRoZSBibG9ja3MgQ29udHJvbGxlci4nKTsKICAgIH0pOwoqLwoKLyoKRXhhbXBsZSBvZiBjdXN0b20gdmFsaWRhdGlvbgpWZWVWYWxpZGF0ZS5leHRlbmQoJ2Rlc2NyaXB0aW9uJywgewogIHZhbGlkYXRlOiAodmFsdWUpID0+ICh2YWx1ZSAmJiB2YWx1ZS5sZW5ndGggPiA5KSwKICBtZXNzYWdlOiAnUGxlYXNlIGFkZCBhIGRlc2NyaXB0aW9uIG9mIGF0IGxlYXN0IDEwIGNoYXJhY3RlcnMnCn0pOyovCi8vIFJlZ2lzdGVyIHRoZSBjb21wb25lbnQgZ2xvYmFsbHkuCi8vVnVlLmNvbXBvbmVudCgndmFsaWRhdGlvbi1wcm92aWRlcicsIFZlZVZhbGlkYXRlLlZhbGlkYXRpb25Qcm92aWRlcik7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIm5ldy1ibG9jay1jb21wb25lbnQiLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBibG9ja0RhdGE6IHsKICAgICAgICBjaHVua05hbWU6ICcnLAogICAgICAgIGRlc2NyaXB0aW9uOiAnJwogICAgICB9LAogICAgICB2YWxpZE5hbWU6IG51bGwsCiAgICAgIGJsb2NrTGlzdDogW10sCiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBvblNlbGVjdEJsb2NrIChibG9ja0RhdGEpIHsKICAgICAgdGhpcy5ibG9ja0RhdGEgPSBibG9ja0RhdGE7CiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb21wb25lbnRQcmV2aWV3Jykuc3JjID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbXBvbmVudFByZXZpZXcnKS5zcmM7CiAgICB9LAogICAgc2F2ZShkYXRhKSB7CiAgICAgIGxldCBheGlvc0NvbmZpZyA9IHsKICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLAogICAgICAgICAgJ0FjY2Vzcy1Db250cm9sLUFsbG93LU9yaWdpbic6ICcqJywKICAgICAgICB9CiAgICAgIH07CiAgICAgIGNvbnN0IG1vZGFsUmVmID0gdGhpcy4kYnZNb2RhbDsKICAgICAgLy9maXJzdCB2YWxpZGF0ZSB0aGF0IHRoZSBibG9jayBkb2VzIG5vdCBleGlzdHMKICAgICAgLypheGlvcy5nZXQod2luZG93LmxvY2F0aW9uLnByb3RvY29sICsgIi8vIiArIHdpbmRvdy5sb2NhdGlvbi5ob3N0ICsgVnVlLnByb3RvdHlwZS4kcmVzdFJvdXRlICsgJy9yZXN0L2luZGV4LnBocD9fcmVzdD1CbG9ja3MvJywKICAgICAgICAgIGRhdGEsCiAgICAgICAgICBheGlvc0NvbmZpZykKICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgdGhpcy4kZW1pdCgnYmxvY2stc2VsZWN0ZWQnLCByZXNwb25zZS5kYXRhLm9iamVjdCk7CiAgICAgICAgICAgIC8vdGhpcy4kcm9vdC4kZW1pdCgncmVsb2FkLWJvY2tzLWxpc3QnLCBkYXRhKTsKICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdjaGFuZ2UnLCB0cnVlKTsKICAgICAgICAgICAgdGhpcy5ibG9ja0RhdGEuY2h1bmtOYW1lID0gJyc7CiAgICAgICAgICAgIHRoaXMuYmxvY2tEYXRhLmRlc2NyaXB0aW9uID0gJyc7CiAgICAgICAgICAgIG1vZGFsUmVmLmhpZGUoJ25ldy1ibG9jaycpOwoKICAgICAgICAgICAgLy9kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGVtb0lmcmFtZScpLnNyYyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkZW1vSWZyYW1lJykuc3JjOwogICAgICAgICAgfSkKICAgICAgICAgIC5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgICAgICAgdGhpcy5zaG93RXJyb3JBamF4KCk7CiAgICAgICAgICB9KTsqLwogICAgICAvLyBUT0RPIHJlZW5hYmxlIHRvIHVzZSByaWd0aCBhcGkgZW5kcG9pbnQgaW5zdGVhZCBvZiB0aGlzCiAgICAgIHRoaXMuJGF4aW9zLnB1dCh3aW5kb3cubG9jYXRpb24ucHJvdG9jb2wgKyAiLy8iICsgd2luZG93LmxvY2F0aW9uLmhvc3QgKyB0aGlzLiRyZXN0Um91dGUgKyAnL3Jlc3QvaW5kZXgucGhwP19yZXN0PUJsb2Nrcy8nLAogICAgICAgICAgZGF0YSwKICAgICAgICAgIGF4aW9zQ29uZmlnKQogICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgICB0aGlzLiRlbWl0KCdibG9jay1zZWxlY3RlZCcsIHJlc3BvbnNlLmRhdGEub2JqZWN0KTsKICAgICAgICAgICAgLy90aGlzLiRyb290LiRlbWl0KCdyZWxvYWQtYm9ja3MtbGlzdCcsIGRhdGEpOwogICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ2NoYW5nZScsIHRydWUpOwogICAgICAgICAgICB0aGlzLmJsb2NrRGF0YS5jaHVua05hbWUgPSAnJzsKICAgICAgICAgICAgdGhpcy5ibG9ja0RhdGEuZGVzY3JpcHRpb24gPSAnJzsKICAgICAgICAgICAgbW9kYWxSZWYuaGlkZSgnbmV3LWJsb2NrJyk7CgogICAgICAgICAgICAvL2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkZW1vSWZyYW1lJykuc3JjID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RlbW9JZnJhbWUnKS5zcmM7CiAgICAgICAgICB9KQogICAgICAgICAgLmNhdGNoKGVycm9yID0+IHsKICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICAgICAgICB0aGlzLnNob3dFcnJvckFqYXgoKTsKICAgICAgICAgIH0pOwogICAgICBjb25zb2xlLmxvZyhkYXRhKTsKICAgIH0sCiAgfQp9Owo="},{"version":3,"sources":["newBlockComponent.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"newBlockComponent.vue","sourceRoot":"vloxEditor/src/components","sourcesContent":["<!--\n  - This file is part of VloX.\n  -\n  - Copyright (c) TROTALO, SAS. All Rights Reserved.\n  -\n  - For complete copyright and license information, see the COPYRIGHT and LICENSE\n  - files found in the top-level directory of this distribution.\n  -->\n\n<template>\n  <b-modal\n      ref=\"new-block\" id=\"new-block\" title=\"New VloX\" size=\"xl\" scrollable>\n    <b-form class=\"smallForm\">\n      <b-form-group\n          id=\"input-group-1\"\n          label=\"Block name\"\n          label-for=\"input-1\">\n        <validation-provider name=\"Name\" rules=\"min:5|alpha_dash\" v-slot=\"{ errors }\">\n          <b-form-input\n              id=\"input-1\"\n              v-model=\"blockData.chunkName\"\n              placeholder=\"Enter at least 5 characters\"\n              :state=\"validName\"\n              required>\n          </b-form-input>\n          <span class=\"text-danger\">{{ errors[0] }}</span>\n        </validation-provider>\n      </b-form-group>\n\n      <b-form-group id=\"input-group-2\" label=\"Blocks description:\" label-for=\"input-2\">\n        <validation-provider name=\"Description\" rules=\"min:10|alpha_spaces\" v-slot=\"{ errors }\">\n          <b-form-textarea\n              id=\"textarea\"\n              v-model=\"blockData.description\"\n              placeholder=\"Enter a description for your block\"\n              rows=\"3\"\n              max-rows=\"6\"\n          ></b-form-textarea>\n          <span class=\"text-danger\">{{ errors[0] }}</span>\n        </validation-provider>\n      </b-form-group>\n    </b-form>\n    <template #modal-footer>\n      <div class=\"addButton w-100\">\n        <b-button\n            variant=\"outline-primary\"\n            class=\"addvloxBlock\"\n            @click=\"save(blockData)\"\n            type=\"button\">Create Block\n        </b-button>\n      </div>\n    </template>\n  </b-modal>\n</template>\n\n<script>\nlet blockList = [];\n/*\naxios.get(window.location.protocol + \"//\" + window.location.host + Vue.prototype.$restRoute + '/rest/blocks')\n    .then(response => {\n      blockList = response.data;\n    })\n    .catch(error => {\n      alert('The ajax petition has problem doing a GET request, please verify the blocks Controller.');\n    });\n*/\n\n/*\nExample of custom validation\nVeeValidate.extend('description', {\n  validate: (value) => (value && value.length > 9),\n  message: 'Please add a description of at least 10 characters'\n});*/\n// Register the component globally.\n//Vue.component('validation-provider', VeeValidate.ValidationProvider);\n\nexport default {\n  name: \"new-block-component\",\n  data() {\n    return {\n      blockData: {\n        chunkName: '',\n        description: ''\n      },\n      validName: null,\n      blockList: [],\n    }\n  },\n  methods: {\n    onSelectBlock (blockData) {\n      this.blockData = blockData;\n      document.getElementById('componentPreview').src = document.getElementById('componentPreview').src;\n    },\n    save(data) {\n      let axiosConfig = {\n        headers: {\n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*',\n        }\n      };\n      const modalRef = this.$bvModal;\n      //first validate that the block does not exists\n      /*axios.get(window.location.protocol + \"//\" + window.location.host + Vue.prototype.$restRoute + '/rest/index.php?_rest=Blocks/',\n          data,\n          axiosConfig)\n          .then(response => {\n            this.$emit('block-selected', response.data.object);\n            //this.$root.$emit('reload-bocks-list', data);\n            this.$store.commit('change', true);\n            this.blockData.chunkName = '';\n            this.blockData.description = '';\n            modalRef.hide('new-block');\n\n            //document.getElementById('demoIframe').src = document.getElementById('demoIframe').src;\n          })\n          .catch(error => {\n            console.log(error);\n            this.showErrorAjax();\n          });*/\n      // TODO reenable to use rigth api endpoint instead of this\n      this.$axios.put(window.location.protocol + \"//\" + window.location.host + this.$restRoute + '/rest/index.php?_rest=Blocks/',\n          data,\n          axiosConfig)\n          .then(response => {\n            this.$emit('block-selected', response.data.object);\n            //this.$root.$emit('reload-bocks-list', data);\n            this.$store.commit('change', true);\n            this.blockData.chunkName = '';\n            this.blockData.description = '';\n            modalRef.hide('new-block');\n\n            //document.getElementById('demoIframe').src = document.getElementById('demoIframe').src;\n          })\n          .catch(error => {\n            console.log(error);\n            this.showErrorAjax();\n          });\n      console.log(data);\n    },\n  }\n};\n</script>\n<style scope>\n\n</style>"]}]}